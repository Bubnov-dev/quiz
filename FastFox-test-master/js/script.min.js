$(document).ready((function(){var t=new Map([["EyeZen",{logo:"img/Essilor_LogoBrand_Eyezen_White.png",title:"Улучшенные однофокальные линзы",icons:['<?xml version="1.0" encoding="utf-8"?>\x3c!-- Generator: Adobe Illustrator 19.2.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t viewBox="0 0 40 40" style="enable-background:new 0 0 40 40;" xml:space="preserve"><style type="text/css">\t.st0{clip-path:url(#SVGID_2_);fill:#0082CA;}\t.st1{fill:#0082CA;}\t.st2{clip-path:url(#SVGID_4_);fill:#0082CA;}\t.st3{clip-path:url(#SVGID_6_);fill:#0082CA;}</style><g>\t<path class="st1" d="M20,22.9c-1.8,0-3.2-1.4-3.2-3.2c0-1.8,1.4-3.2,3.2-3.2c1.8,0,3.2,1.4,3.2,3.2C23.2,21.4,21.7,22.9,20,22.9z\t\t M20,17c-1.5,0-2.7,1.2-2.7,2.7s1.2,2.7,2.7,2.7c1.5,0,2.7-1.2,2.7-2.7S21.4,17,20,17z"/>\t<path class="st1" d="M20.9,19.6c0,0.5-0.4,0.9-0.9,0.9c-0.5,0-0.9-0.4-0.9-0.9c0-0.5,0.4-0.9,0.9-0.9\t\tC20.4,18.7,20.9,19.1,20.9,19.6"/>\t<g>\t\t<path class="st1" d="M32.1,27.4H7.9V11.3h24.2V27.4z M8.5,26.8h23.1v-15H8.5V26.8z"/>\t\t<path class="st1" d="M29.5,25.1h-19V13.9h19V25.1z M11,24.6H29V14.5H11V24.6z"/>\t\t<path class="st1" d="M32.6,29.6H7.4c-1.3,0-2.4-1.1-2.4-2.4v-0.4H35v0.4C35,28.6,33.9,29.6,32.6,29.6z M5.6,27.4\t\t\tc0.1,0.9,0.8,1.7,1.8,1.7h25.2c0.9,0,1.7-0.7,1.8-1.7H5.6z"/>\t\t<path class="st1" d="M20,23.2c-4,0-6.4-3.3-6.5-3.4l-0.1-0.2l0.1-0.2C13.5,19.3,16,16,20,16c4,0,6.4,3.3,6.5,3.4l0.1,0.2l-0.1,0.2\t\t\tC26.4,19.9,24,23.2,20,23.2z M14,19.6c0.5,0.7,2.7,3,5.9,3c3.2,0,5.4-2.4,5.9-3c-0.5-0.7-2.7-3-5.9-3C16.7,16.6,14.6,19,14,19.6z"\t\t\t/>\t\t<path class="st1" d="M21.1,13.5h-2.5c-0.2,0-0.3-0.1-0.3-0.3s0.1-0.3,0.3-0.3h2.5c0.2,0,0.3,0.1,0.3,0.3S21.3,13.5,21.1,13.5z"/>\t</g></g></svg>','<?xml version="1.0" encoding="utf-8"?>\x3c!-- Generator: Adobe Illustrator 19.2.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t viewBox="0 0 40 40" style="enable-background:new 0 0 40 40;" xml:space="preserve"><style type="text/css">\t.st0{clip-path:url(#SVGID_2_);fill:#0082CA;}\t.st1{fill:#0082CA;}\t.st2{clip-path:url(#SVGID_4_);fill:#0082CA;}\t.st3{clip-path:url(#SVGID_6_);fill:#0082CA;}</style><g>\t<g>\t\t<defs>\t\t\t<rect id="SVGID_1_" x="9" y="7.2" width="12.3" height="24.4"/>\t\t</defs>\t\t<clipPath id="SVGID_2_">\t\t\t<use xlink:href="#SVGID_1_"  style="overflow:visible;"/>\t\t</clipPath>\t\t<path class="st0" d="M21.3,25.8c-3.2,0-5.9-2.6-5.9-5.9S18,14,21.3,14s5.9,2.6,5.9,5.9S24.5,25.8,21.3,25.8z M21.3,14.8\t\t\tc-2.8,0-5.1,2.3-5.1,5.1c0,2.8,2.3,5.1,5.1,5.1s5.1-2.3,5.1-5.1C26.4,17.1,24.1,14.8,21.3,14.8z"/>\t</g>\t<path class="st1" d="M13.5,20h-2.6c-0.2,0-0.4-0.2-0.4-0.4s0.2-0.4,0.4-0.4h2.6c0.2,0,0.4,0.2,0.4,0.4S13.7,20,13.5,20z"/>\t<path class="st1" d="M14.5,16.1c-0.1,0-0.1,0-0.2,0l-2.3-1.3c-0.2-0.1-0.2-0.3-0.1-0.5c0.1-0.2,0.3-0.2,0.5-0.1l2.3,1.3\t\tc0.2,0.1,0.2,0.3,0.1,0.5C14.8,16,14.7,16.1,14.5,16.1z"/>\t<path class="st1" d="M17.4,13.2c-0.1,0-0.3-0.1-0.3-0.2l-1.4-2.2c-0.1-0.2-0.1-0.4,0.1-0.5c0.2-0.1,0.4-0.1,0.5,0.1l1.4,2.2\t\tc0.1,0.2,0.1,0.4-0.1,0.5C17.5,13.2,17.4,13.2,17.4,13.2z"/>\t<g>\t\t<defs>\t\t\t<rect id="SVGID_3_" x="9" y="7.2" width="12.3" height="24.4"/>\t\t</defs>\t\t<clipPath id="SVGID_4_">\t\t\t<use xlink:href="#SVGID_3_"  style="overflow:visible;"/>\t\t</clipPath>\t\t<path class="st2" d="M21.3,12.2c-0.2,0-0.4-0.2-0.4-0.4l0-2.6c0-0.2,0.2-0.4,0.4-0.4c0,0,0,0,0,0c0.2,0,0.4,0.2,0.4,0.4l0,2.6\t\t\tC21.7,12,21.5,12.2,21.3,12.2C21.3,12.2,21.3,12.2,21.3,12.2z"/>\t</g>\t<path class="st1" d="M12.3,25.1c-0.1,0-0.3-0.1-0.3-0.2c-0.1-0.2,0-0.4,0.1-0.5l2.3-1.3c0.2-0.1,0.4,0,0.5,0.1\t\tc0.1,0.2,0,0.4-0.1,0.5l-2.3,1.3C12.4,25.1,12.3,25.1,12.3,25.1z"/>\t<path class="st1" d="M16,28.9c-0.1,0-0.1,0-0.2-0.1c-0.2-0.1-0.2-0.3-0.1-0.5l1.4-2.2c0.1-0.2,0.3-0.2,0.5-0.1\t\tc0.2,0.1,0.2,0.3,0.1,0.5l-1.4,2.2C16.3,28.8,16.1,28.9,16,28.9z"/>\t<g>\t\t<path class="st1" d="M21.3,30.3C21.3,30.3,21.3,30.3,21.3,30.3c-0.2,0-0.4-0.2-0.4-0.4l0-2.6c0-0.2,0.2-0.4,0.4-0.4c0,0,0,0,0,0\t\t\tc0.2,0,0.4,0.2,0.4,0.4l0,2.6C21.6,30.1,21.5,30.3,21.3,30.3z"/>\t</g>\t<g>\t\t<defs>\t\t\t<rect id="SVGID_5_" x="21.3" y="6.4" width="8.2" height="26.1"/>\t\t</defs>\t\t<clipPath id="SVGID_6_">\t\t\t<use xlink:href="#SVGID_5_"  style="overflow:visible;"/>\t\t</clipPath>\t\t<path class="st3" d="M27.5,30.6h-9.7c-0.6,0-1.2-0.5-1.2-1.2V10.3c0-0.6,0.5-1.2,1.2-1.2h9.7c0.6,0,1.2,0.5,1.2,1.2v19.2\t\t\tC28.7,30.1,28.2,30.6,27.5,30.6z M17.8,9.7c-0.3,0-0.6,0.2-0.6,0.6v19.2c0,0.3,0.2,0.6,0.6,0.6h9.7c0.3,0,0.6-0.2,0.6-0.6V10.3\t\t\tc0-0.3-0.2-0.6-0.6-0.6H17.8z"/>\t\t<path class="st3" d="M26.7,27h-8.3c-0.3,0-0.5-0.2-0.5-0.5V12.2c0-0.3,0.2-0.5,0.5-0.5h8.3c0.3,0,0.5,0.2,0.5,0.5v14.2\t\t\tC27.2,26.7,27,27,26.7,27z M18.5,26.4h8.2V12.3h-8.2V26.4z"/>\t\t<path class="st3" d="M23.3,10.7h-1.7c-0.1,0-0.2-0.1-0.2-0.2s0.1-0.2,0.2-0.2h1.7c0.1,0,0.2,0.1,0.2,0.2S23.4,10.7,23.3,10.7z"/>\t\t<path class="st3" d="M23.6,28.9c0,0.5-0.4,0.9-0.9,0.9c-0.5,0-0.9-0.4-0.9-0.9c0-0.5,0.4-0.9,0.9-0.9C23.2,28,23.6,28.4,23.6,28.9\t\t\t"/>\t</g>\t<g>\t\t<path class="st1" d="M21.3,35.4c-0.2,0-0.4-0.2-0.4-0.4V5.9c0-0.2,0.2-0.4,0.4-0.4s0.4,0.2,0.4,0.4V35\t\t\tC21.6,35.3,21.5,35.4,21.3,35.4z"/>\t</g></g></svg>','<?xml version="1.0" encoding="utf-8"?>\x3c!-- Generator: Adobe Illustrator 19.2.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t viewBox="0 0 40 40" style="enable-background:new 0 0 40 40;" xml:space="preserve"><style type="text/css">\t.st0{clip-path:url(#SVGID_2_);fill:#0082CA;}\t.st1{fill:#0082CA;}\t.st2{clip-path:url(#SVGID_4_);fill:#0082CA;}\t.st3{clip-path:url(#SVGID_6_);fill:#0082CA;}</style><g>\t<g>\t\t<defs>\t\t\t<rect id="SVGID_1_" x="9" y="7.2" width="12.3" height="24.4"/>\t\t</defs>\t\t<clipPath id="SVGID_2_">\t\t\t<use xlink:href="#SVGID_1_"  style="overflow:visible;"/>\t\t</clipPath>\t\t<path class="st0" d="M21.3,25.8c-3.2,0-5.9-2.6-5.9-5.9S18,14,21.3,14s5.9,2.6,5.9,5.9S24.5,25.8,21.3,25.8z M21.3,14.8\t\t\tc-2.8,0-5.1,2.3-5.1,5.1c0,2.8,2.3,5.1,5.1,5.1s5.1-2.3,5.1-5.1C26.4,17.1,24.1,14.8,21.3,14.8z"/>\t</g>\t<path class="st1" d="M13.5,20h-2.6c-0.2,0-0.4-0.2-0.4-0.4s0.2-0.4,0.4-0.4h2.6c0.2,0,0.4,0.2,0.4,0.4S13.7,20,13.5,20z"/>\t<path class="st1" d="M14.5,16.1c-0.1,0-0.1,0-0.2,0l-2.3-1.3c-0.2-0.1-0.2-0.3-0.1-0.5c0.1-0.2,0.3-0.2,0.5-0.1l2.3,1.3\t\tc0.2,0.1,0.2,0.3,0.1,0.5C14.8,16,14.7,16.1,14.5,16.1z"/>\t<path class="st1" d="M17.4,13.2c-0.1,0-0.3-0.1-0.3-0.2l-1.4-2.2c-0.1-0.2-0.1-0.4,0.1-0.5c0.2-0.1,0.4-0.1,0.5,0.1l1.4,2.2\t\tc0.1,0.2,0.1,0.4-0.1,0.5C17.5,13.2,17.4,13.2,17.4,13.2z"/>\t<g>\t\t<defs>\t\t\t<rect id="SVGID_3_" x="9" y="7.2" width="12.3" height="24.4"/>\t\t</defs>\t\t<clipPath id="SVGID_4_">\t\t\t<use xlink:href="#SVGID_3_"  style="overflow:visible;"/>\t\t</clipPath>\t\t<path class="st2" d="M21.3,12.2c-0.2,0-0.4-0.2-0.4-0.4l0-2.6c0-0.2,0.2-0.4,0.4-0.4c0,0,0,0,0,0c0.2,0,0.4,0.2,0.4,0.4l0,2.6\t\t\tC21.7,12,21.5,12.2,21.3,12.2C21.3,12.2,21.3,12.2,21.3,12.2z"/>\t</g>\t<path class="st1" d="M12.3,25.1c-0.1,0-0.3-0.1-0.3-0.2c-0.1-0.2,0-0.4,0.1-0.5l2.3-1.3c0.2-0.1,0.4,0,0.5,0.1\t\tc0.1,0.2,0,0.4-0.1,0.5l-2.3,1.3C12.4,25.1,12.3,25.1,12.3,25.1z"/>\t<path class="st1" d="M16,28.9c-0.1,0-0.1,0-0.2-0.1c-0.2-0.1-0.2-0.3-0.1-0.5l1.4-2.2c0.1-0.2,0.3-0.2,0.5-0.1\t\tc0.2,0.1,0.2,0.3,0.1,0.5l-1.4,2.2C16.3,28.8,16.1,28.9,16,28.9z"/>\t<g>\t\t<path class="st1" d="M21.3,30.3C21.3,30.3,21.3,30.3,21.3,30.3c-0.2,0-0.4-0.2-0.4-0.4l0-2.6c0-0.2,0.2-0.4,0.4-0.4c0,0,0,0,0,0\t\t\tc0.2,0,0.4,0.2,0.4,0.4l0,2.6C21.6,30.1,21.5,30.3,21.3,30.3z"/>\t</g>\t<g>\t\t<defs>\t\t\t<rect id="SVGID_5_" x="21.3" y="6.4" width="8.2" height="26.1"/>\t\t</defs>\t\t<clipPath id="SVGID_6_">\t\t\t<use xlink:href="#SVGID_5_"  style="overflow:visible;"/>\t\t</clipPath>\t\t<path class="st3" d="M27.5,30.6h-9.7c-0.6,0-1.2-0.5-1.2-1.2V10.3c0-0.6,0.5-1.2,1.2-1.2h9.7c0.6,0,1.2,0.5,1.2,1.2v19.2\t\t\tC28.7,30.1,28.2,30.6,27.5,30.6z M17.8,9.7c-0.3,0-0.6,0.2-0.6,0.6v19.2c0,0.3,0.2,0.6,0.6,0.6h9.7c0.3,0,0.6-0.2,0.6-0.6V10.3\t\t\tc0-0.3-0.2-0.6-0.6-0.6H17.8z"/>\t\t<path class="st3" d="M26.7,27h-8.3c-0.3,0-0.5-0.2-0.5-0.5V12.2c0-0.3,0.2-0.5,0.5-0.5h8.3c0.3,0,0.5,0.2,0.5,0.5v14.2\t\t\tC27.2,26.7,27,27,26.7,27z M18.5,26.4h8.2V12.3h-8.2V26.4z"/>\t\t<path class="st3" d="M23.3,10.7h-1.7c-0.1,0-0.2-0.1-0.2-0.2s0.1-0.2,0.2-0.2h1.7c0.1,0,0.2,0.1,0.2,0.2S23.4,10.7,23.3,10.7z"/>\t\t<path class="st3" d="M23.6,28.9c0,0.5-0.4,0.9-0.9,0.9c-0.5,0-0.9-0.4-0.9-0.9c0-0.5,0.4-0.9,0.9-0.9C23.2,28,23.6,28.4,23.6,28.9\t\t\t"/>\t</g>\t<g>\t\t<path class="st1" d="M21.3,35.4c-0.2,0-0.4-0.2-0.4-0.4V5.9c0-0.2,0.2-0.4,0.4-0.4s0.4,0.2,0.4,0.4V35\t\t\tC21.6,35.3,21.5,35.4,21.3,35.4z"/>\t</g></g></svg>']}],["Varilux",{logo:"img/essilor_sg.png",title:"qwertyu2i",icons:[]}],["Stellest",{logo:"img/essilor_sg.png",title:"qwertyu2i",icons:[]}],["Transitions",{logo:"img/essilor_sg.png",title:"qwertyu2i",icons:[]}],["Crizal Alize",{logo:"img/essilor_sg.png",title:"qwertyu2i",icons:[]}],["Crizal Prevencia",{logo:"img/essilor_sg.png",title:"qwertyu2i",icons:[]}],["Crizal Sapphire",{logo:"img/essilor_sg.png",title:"qwertyu2i",icons:[]}]]),e=[{no:[{name:"vision-challenge",val:"kids"}],yes:[],more:[],less:[{name:"in-comp",val:3}],value:"EyeZen"}],l=function(t,e,l){let s="";return l.forEach(t=>{s+=t}),'<div class="brand-template-wrapper"><div class="brand-template"><div class="brand-template__logo"><img src="'+t+'" alt=""></div><div class="brand-template__title">'+e+'</div><div class="brand-template__icons">'+s+"</div></div></div>"};$("#mainpage_button").on("click",(function(){$(".questions").removeClass("hidden"),$(".js-lens-builder__start-screen").addClass("hidden")})),$(".twentytwenty-handle").on("mouseout",(function(t){console.log("mouiseout!!!"),console.log($(this).parent().find(".real-val")),$(this).parent().find(".real-val").html($(this).css("left").replace(/[a-z]/gi,"")/$("#filter-image-wrapper").width())})),$("#timer-range").slider({animate:"slow",min:0,max:12,value:4}),$("#timer-range").slider({slide:function(t,e){$(".circle").html(e.value),$(".num").html("<strong>"+e.value+"</strong><small> ЧАСОВ</small>"),s(".circle",e.value),$(".time-slider").find(".real-val").text(e.value)}});var s=function(t,e){var l=document.querySelector(t),s=parseFloat(l.innerHTML);s=526*e/12+1,l.innerHTML=' <svg width="178" height="178"><circle transform="rotate(-90)" style="stroke-dasharray:'+s+'px 526px;" r="84" cx="-89" cy="89" /></svg>'};s(".circle"),$(".kids-input").on("click",(function(){let t="ГДЕ ВАШ РЕБЕНОК ПРОВОДИТ БОЛЬШУЮ ЧАСТЬ СВОЕГО ДНЯ?";$("#step-3").find(".lens-builder__question-title").text(t),t="СКОЛЬКО ЧАСОВ В ДЕНЬ ВАШ РЕБЕНОК ПРОВОДИТ ПЕРЕД ЭКРАНОМ КОМПЬЮТЕРА, ТЕЛЕФОНА, ТЕЛЕВИЗОРА И Т.Д.?",$("#step-4").find(".lens-builder__question-title").text(t),titleKids="Сталкивался ли ваш ребенок с чем-то из перечисленного?",$("#step-5").find(".lens-builder__question-title").text(t),t="УЧАСТВУЕТ ЛИ ВАШ РЕБЕНОК В КАКОЙ-ЛИБО ИЗ СЛЕДУЮЩИХ АКТИВНОСТЕЙ?",$("#step-6").find(".lens-builder__question-title").text(t)}));let a=0,i=$(".question"),c=i.length,n=$(".back-btn"),o=$(".lens-builder__arrow--next");function r(s){a++,n.removeClass("disable"),s&&(a+=Number(s)),c<=a?(console.log("result"),$(".questions").addClass("hidden"),$(".test__result").removeClass("hidden"),function(){let s=$("input:checked"),a=$(".real-val"),i=[];s.each((function(t,e){i.push({name:e.getAttribute("name"),val:$(e).val(),rName:"-1"})})),a.each((function(t,e){i.push({name:e.getAttribute("data-name"),val:$(e).text(),rName:"-1"})})),i.forEach(t=>{if("in-comp"==t.name){t.val}else"most-day"==t.name?t.val<.15?console.log("Весь день на улице"):t.val<.35?console.log("В основном на улице"):t.val<.65?console.log("Часть времени в помещении, часть – на улице"):t.val<.85?console.log("В основном в помещении"):console.log("Весь день в помещении"):console.log($('[name="'+t.name+'"][value="'+t.val+'"]+label span').html())}),console.log(i);let c=i[0].name;console.log(c);let n="<li>",o=0;i.forEach(t=>{let e;0!=o&&(console.log(t.name),t.name!=c?n+="</li><li>":n+=", "),e="in-comp"==t.name?"Часов перед компьютером: "+t.val:"most-day"==t.name?t.val<.15?"Весь день на улице":t.val<.35?"В основном на улице":t.val<.65?"Часть времени в помещении, часть – на улице":t.val<.85?"В основном в помещении":"Весь день в помещении":$('[name="'+t.name+'"][value="'+t.val+'"]+label span').html(),n+=e,c=t.name,o++}),n+="</li>",$(".lens-builder__bullets").html($(n)),o=0;let r=new Set;e.forEach(e=>{let s=!0;console.log(e),e.no!=[]&&e.no.forEach(t=>{i.forEach(e=>{JSON.stringify(t)==JSON.stringify(e)&&(s=!1)})});let a=!0;e.yes!=[]&&e.yes.forEach(t=>{let e=!1;i.forEach(l=>{JSON.stringify(t)==JSON.stringify(l)&&(e=!0)}),e||(a=!1)});let c=!0;e.more!=[]&&e.more.forEach(t=>{tmpRes=!1,i.forEach(e=>{t.name==e.name&&e.val>t.val&&(tmpRes=!0)}),tmpRes||(c=!1)});let n=!0;if(e.less!=[]&&e.less.forEach(t=>{tmpRes=!1,i.forEach(e=>{t.name==e.name&&e.val<t.val&&(tmpRes=!0)}),tmpRes||(n=!1)}),console.log(s,a,c,n),s&&a&&c&&n){let s=r.size;r.add(e.value),r.size!=s&&(console.log(e.value),$('[data-brand="'+e.value+'"]').removeClass("hidden"),console.log(t.get(e.value)),0==o?$(".position-right .position-wrapper").html(l(t.get(e.value).logo,t.get(e.value).title,t.get(e.value).icons)):$(".position-left .position-wrapper").html($(".position-left .position-wrapper").html()+l(t.get(e.value).logo,t.get(e.value).title,t.get(e.value).icons)),o++)}})}()):(o.addClass("disable"),h())}function h(){i.addClass("hidden");try{i.eq(a).removeClass("hidden"),$("#filter-image-wrapper").twentytwenty({no_overlay:!0}),$(".twentytwenty-handle").on("mouseout",(function(t){console.log("mouiseout!!!"),console.log($(this).parent().find(".real-val")),$(this).parent().find(".real-val").html($(this).css("left").replace(/[a-z]/gi,"")/$("#filter-image-wrapper").width())})),i.eq(a).find("input:checked").length>0&&o.removeClass("disable")}catch(t){}}$("input").removeAttr("checked"),o.on("click",(function(){r()})),n.on("click",(function(){a>0&&(a--,o.removeClass("disable"),h(),0==a&&n.addClass("disable"))})),$(".question input:radio").on("change",(function(){$(this).attr("data-to-skip")?(console.log("has attr"),r($(this).attr("data-to-skip"))):r()})),i.each(()=>{let t=$(this);$("input:checkBox").on("change",(function(){o.removeClass("disable"),t.find("input:checkbox:checked").length>0?o.removeClass("disable"):o.addClass("disable")}))}),h()}));