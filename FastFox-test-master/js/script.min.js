$(document).ready((function(){var e=[{no:[{name:"vision-challenge",val:"kids"}],yes:[],more:[],less:[{name:"in-comp",val:3}],value:"Crizal Alize"},{no:[],yes:[{name:"vision-challenge",val:"kids"}],more:[{name:"in-comp",val:3}],less:[],value:"Singe vision"}];$("#mainpage_button").on("click",(function(){$(".questions").removeClass("hidden"),$(".js-lens-builder__start-screen").addClass("hidden")})),$(".twentytwenty-handle").on("mouseleave",(function(e){$(this).parent().find(".real-val").text($(this).css("left").replace(/[a-z]/gi,"")/$("#filter-image-wrapper").width())})),$("#timer-range").slider({animate:"slow",min:0,max:12,value:4}),$("#timer-range").slider({slide:function(e,n){$(".circle").html(n.value),$(".num").html("<strong>"+n.value+"</strong><small> ЧАСОВ</small>"),t(".circle",n.value),$(".time-slider").find(".real-val").text(n.value)}}),$(".kids-input").on("click",(function(){let e="ГДЕ ВАШ РЕБЕНОК ПРОВОДИТ БОЛЬШУЮ ЧАСТЬ СВОЕГО ДНЯ?";$("#step-3").find(".lens-builder__question-title").text(e),e="СКОЛЬКО ЧАСОВ В ДЕНЬ ВАШ РЕБЕНОК ПРОВОДИТ ПЕРЕД ЭКРАНОМ КОМПЬЮТЕРА, ТЕЛЕФОНА, ТЕЛЕВИЗОРА И Т.Д.?",$("#step-4").find(".lens-builder__question-title").text(e),titleKids="Сталкивался ли ваш ребенок с чем-то из перечисленного?",$("#step-5").find(".lens-builder__question-title").text(e),e="УЧАСТВУЕТ ЛИ ВАШ РЕБЕНОК В КАКОЙ-ЛИБО ИЗ СЛЕДУЮЩИХ АКТИВНОСТЕЙ?",$("#step-6").find(".lens-builder__question-title").text(e)}));var t=function(e,t){var n=document.querySelector(e),s=parseFloat(n.innerHTML);s=526*t/12+1,n.innerHTML=' <svg width="178" height="178"><circle transform="rotate(-90)" style="stroke-dasharray:'+s+'px 526px;" r="84" cx="-89" cy="89" /></svg>'};t(".circle");let n=0,s=$(".question"),l=s.length,a=$(".back-btn"),i=$(".lens-builder__arrow--next"),o=0;function r(t){n++,a.removeClass("disable"),t&&(n+=Number(t)),l<=n?(console.log("result"),$(".questions").addClass("hidden"),$(".test__result").removeClass("hidden"),function(){o=0;let t=$("input:checked"),n=$(".real-val"),s=[];t.each((function(e,t){s.push({name:t.getAttribute("name"),val:$(t).val()})})),n.each((function(e,t){s.push({name:t.getAttribute("data-name"),val:$(t).text()})})),console.log(s),e.forEach(e=>{let t=!0;console.log(e),e.no!=[]&&e.no.forEach(e=>{s.forEach(n=>{JSON.stringify(e)==JSON.stringify(n)&&(t=!1)})});let n=!0;e.yes!=[]&&e.yes.forEach(e=>{let t=!1;s.forEach(n=>{JSON.stringify(e)==JSON.stringify(n)&&(t=!0)}),t||(n=!1)});let l=!0;e.more!=[]&&e.more.forEach(e=>{tmpRes=!1,s.forEach(t=>{e.name==t.name&&t.val>e.val&&(tmpRes=!0)}),tmpRes||(l=!1)});let a=!0;e.less!=[]&&e.less.forEach(e=>{tmpRes=!1,s.forEach(t=>{console.log(t),e.name==t.name&&t.val<e.val&&(tmpRes=!0)}),tmpRes||(a=!1)}),console.log(t,n,l,a),t&&n&&l&&a&&console.log(e.value)})}()):(i.addClass("disable"),c())}function c(){s.addClass("hidden");try{s.eq(n).removeClass("hidden"),$("#filter-image-wrapper").twentytwenty({no_overlay:!0}),s.eq(n).find("input:checked").length>0&&i.removeClass("disable")}catch(e){}!function(){let e=$(".test-progressbar").width(),t=n/l,s=e*t,a=100*t;$(".test-progressbar__percent").text(Math.round(a)),$(".test-progressbar__line-ready").width(s)}()}$("input").removeAttr("checked"),i.on("click",(function(){r()})),a.on("click",(function(){n>0&&(n--,i.removeClass("disable"),c(),0==n&&a.addClass("disable"))})),$(".question input:radio").on("change",(function(){$(this).attr("data-to-skip")?(console.log("has attr"),r($(this).attr("data-to-skip"))):r()})),s.each(()=>{let e=$(this);$("input:checkBox").on("change",(function(){i.removeClass("disable"),e.find("input:checkbox:checked").length>0?i.removeClass("disable"):i.addClass("disable")}))}),c()}));