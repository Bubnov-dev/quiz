$(document).ready((function(){var e=new Map([["Crizal Alize",{logo:"img/essilor_sg.png",title:"qwertyui",icons:[]}]]),l=[{no:[{name:"vision-challenge",val:"kids"}],yes:[],more:[],less:[{name:"in-comp",val:3}],value:"Crizal Alize"},{no:[],yes:[{name:"vision-challenge",val:"kids"}],more:[{name:"in-comp",val:3}],less:[],value:"Singe vision"}];$("#mainpage_button").on("click",(function(){$(".questions").removeClass("hidden"),$(".js-lens-builder__start-screen").addClass("hidden")})),$(".twentytwenty-handle").on("mouseleave",(function(e){$(this).parent().find(".real-val").text($(this).css("left").replace(/[a-z]/gi,"")/$("#filter-image-wrapper").width())})),$("#timer-range").slider({animate:"slow",min:0,max:12,value:4}),$("#timer-range").slider({slide:function(e,l){$(".circle").html(l.value),$(".num").html("<strong>"+l.value+"</strong><small> ЧАСОВ</small>"),t(".circle",l.value),$(".time-slider").find(".real-val").text(l.value)}});var t=function(e,l){var t=document.querySelector(e),a=parseFloat(t.innerHTML);a=526*l/12+1,t.innerHTML=' <svg width="178" height="178"><circle transform="rotate(-90)" style="stroke-dasharray:'+a+'px 526px;" r="84" cx="-89" cy="89" /></svg>'};t(".circle"),$(".kids-input").on("click",(function(){let e="ГДЕ ВАШ РЕБЕНОК ПРОВОДИТ БОЛЬШУЮ ЧАСТЬ СВОЕГО ДНЯ?";$("#step-3").find(".lens-builder__question-title").text(e),e="СКОЛЬКО ЧАСОВ В ДЕНЬ ВАШ РЕБЕНОК ПРОВОДИТ ПЕРЕД ЭКРАНОМ КОМПЬЮТЕРА, ТЕЛЕФОНА, ТЕЛЕВИЗОРА И Т.Д.?",$("#step-4").find(".lens-builder__question-title").text(e),titleKids="Сталкивался ли ваш ребенок с чем-то из перечисленного?",$("#step-5").find(".lens-builder__question-title").text(e),e="УЧАСТВУЕТ ЛИ ВАШ РЕБЕНОК В КАКОЙ-ЛИБО ИЗ СЛЕДУЮЩИХ АКТИВНОСТЕЙ?",$("#step-6").find(".lens-builder__question-title").text(e)}));let a=0,n=$(".question"),s=n.length,i=$(".back-btn"),o=$(".lens-builder__arrow--next");function r(t){a++,i.removeClass("disable"),t&&(a+=Number(t)),s<=a?(console.log("result"),$(".questions").addClass("hidden"),$(".test__result").removeClass("hidden"),function(){let t=$("input:checked"),a=$(".real-val"),n=[];t.each((function(e,l){n.push({name:l.getAttribute("name"),val:$(l).val(),rName:"-1"})})),a.each((function(e,l){n.push({name:l.getAttribute("data-name"),val:$(l).text(),rName:"-1"})})),n.forEach(e=>{if("in-comp"==e.name){e.val}else"most-day"==e.name?e.val<.15?console.log("Весь день на улице"):e.val<.35?console.log("В основном на улице"):e.val<.65?console.log("Часть времени в помещении, часть – на улице"):e.val<.85?console.log("В основном в помещении"):console.log("Весь день в помещении"):console.log($('[name="'+e.name+'"][value="'+e.val+'"]+label span').html())}),console.log(n),l.forEach(l=>{let t=!0;console.log(l),l.no!=[]&&l.no.forEach(e=>{n.forEach(l=>{JSON.stringify(e)==JSON.stringify(l)&&(t=!1)})});let a=!0;l.yes!=[]&&l.yes.forEach(e=>{let l=!1;n.forEach(t=>{JSON.stringify(e)==JSON.stringify(t)&&(l=!0)}),l||(a=!1)});let s=!0;l.more!=[]&&l.more.forEach(e=>{tmpRes=!1,n.forEach(l=>{e.name==l.name&&l.val>e.val&&(tmpRes=!0)}),tmpRes||(s=!1)});let i=!0;l.less!=[]&&l.less.forEach(e=>{tmpRes=!1,n.forEach(l=>{e.name==l.name&&l.val<e.val&&(tmpRes=!0)}),tmpRes||(i=!1)}),console.log(t,a,s,i),$(),t&&a&&s&&i&&(console.log(l.value),$('[data-brand="'+l.value+'"]').removeClass("hidden"),console.log(e.get(l.value)),$(".position-left").html(function(e,l,t){let a="";return t.forEach(e=>{a+='<img src="'+e+'" alt="">'}),'<div class="brand-template"><div class="brand-template__logo"><img src="'+e+'" alt=""></div><div class="brand-template__tite">'+l+'</div><div class="brand-template__icons">'+a+"</div></div>"}(e.get(l.value).logo,e.get(l.value).title,e.get(l.value).icons)))})}()):(o.addClass("disable"),c())}function c(){n.addClass("hidden");try{n.eq(a).removeClass("hidden"),$("#filter-image-wrapper").twentytwenty({no_overlay:!0}),n.eq(a).find("input:checked").length>0&&o.removeClass("disable")}catch(e){}}$("input").removeAttr("checked"),o.on("click",(function(){r()})),i.on("click",(function(){a>0&&(a--,o.removeClass("disable"),c(),0==a&&i.addClass("disable"))})),$(".question input:radio").on("change",(function(){$(this).attr("data-to-skip")?(console.log("has attr"),r($(this).attr("data-to-skip"))):r()})),n.each(()=>{let e=$(this);$("input:checkBox").on("change",(function(){o.removeClass("disable"),e.find("input:checkbox:checked").length>0?o.removeClass("disable"):o.addClass("disable")}))}),c()}));